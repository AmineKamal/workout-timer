(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"9v8Q":function(e,t,n){"use strict";n.r(t),n.d(t,"WeightTrackerPageModule",(function(){return k}));var i=n("ofXK"),o=n("3Pt+"),c=n("TEn/"),r=n("tyNb"),a=n("UFF1");function b(e){return e.reduce((e,t)=>e+t,0)}var s=n("Ah2X"),l=n("2Q/g"),h=n("fXoL"),g=n("2MiI"),u=n("LmEr");function m(e,t){if(1&e&&(h.Ob(0,"ion-label"),h.mc(1),h.Nb()),2&e){const e=h.Zb();h.xb(1),h.nc(e.currentWeight)}}function d(e,t){if(1&e&&(h.Ob(0,"ion-label"),h.mc(1),h.Nb()),2&e){const e=h.Zb();h.xb(1),h.nc(e.hiddenWeight)}}function f(e,t){if(1&e){const e=h.Pb();h.Ob(0,"ion-icon",12),h.Wb("click",(function(){return h.gc(e),h.Zb().toggleHideWeight()})),h.Nb()}}function W(e,t){if(1&e){const e=h.Pb();h.Ob(0,"ion-icon",13),h.Wb("click",(function(){return h.gc(e),h.Zb().toggleHideWeight()})),h.Nb()}}function O(e,t){if(1&e){const e=h.Pb();h.Ob(0,"ion-card-content"),h.Ob(1,"ion-item",1),h.Ob(2,"ion-label",14),h.mc(3,"Calories"),h.Nb(),h.Ob(4,"ion-input",9),h.Wb("ngModelChange",(function(t){return h.gc(e),h.Zb().macros.calories=t})),h.Nb(),h.Nb(),h.Ob(5,"ion-item",1),h.Ob(6,"ion-label",14),h.mc(7,"Protein"),h.Nb(),h.Ob(8,"ion-input",9),h.Wb("ngModelChange",(function(t){return h.gc(e),h.Zb().macros.protein=t})),h.Nb(),h.Nb(),h.Ob(9,"ion-item",1),h.Ob(10,"ion-label",14),h.mc(11,"Fat"),h.Nb(),h.Ob(12,"ion-input",9),h.Wb("ngModelChange",(function(t){return h.gc(e),h.Zb().macros.fat=t})),h.Nb(),h.Nb(),h.Ob(13,"ion-item",1),h.Ob(14,"ion-label",14),h.mc(15,"Carbs"),h.Nb(),h.Ob(16,"ion-input",9),h.Wb("ngModelChange",(function(t){return h.gc(e),h.Zb().macros.carbs=t})),h.Nb(),h.Nb(),h.Ob(17,"ion-item",7),h.Wb("click",(function(){return h.gc(e),h.Zb().logMacros()})),h.Ob(18,"div",8),h.mc(19,"Save Macros"),h.Nb(),h.Nb(),h.Nb()}if(2&e){const e=h.Zb();h.xb(4),h.ec("ngModel",e.macros.calories),h.xb(4),h.ec("ngModel",e.macros.protein),h.xb(4),h.ec("ngModel",e.macros.fat),h.xb(4),h.ec("ngModel",e.macros.carbs)}}function N(e,t){if(1&e){const e=h.Pb();h.Ob(0,"ion-card-content"),h.Ob(1,"ion-item",1),h.Ob(2,"ion-label"),h.mc(3,"Calories"),h.Nb(),h.Ob(4,"ion-label"),h.mc(5),h.Nb(),h.Nb(),h.Ob(6,"ion-item",1),h.Ob(7,"ion-label"),h.mc(8,"Protein"),h.Nb(),h.Ob(9,"ion-label"),h.mc(10),h.Nb(),h.Nb(),h.Ob(11,"ion-item",1),h.Ob(12,"ion-label"),h.mc(13,"Fat"),h.Nb(),h.Ob(14,"ion-label"),h.mc(15),h.Nb(),h.Nb(),h.Ob(16,"ion-item",1),h.Ob(17,"ion-label"),h.mc(18,"Carbs"),h.Nb(),h.Ob(19,"ion-label"),h.mc(20),h.Nb(),h.Nb(),h.Ob(21,"ion-item",7),h.Wb("click",(function(){return h.gc(e),h.Zb().forceUpdateMacroForm()})),h.Ob(22,"div",8),h.mc(23,"Update Macros"),h.Nb(),h.Nb(),h.Nb()}if(2&e){const e=h.Zb();h.xb(5),h.nc(e.macros.calories),h.xb(5),h.nc(e.macros.protein),h.xb(5),h.nc(e.macros.fat),h.xb(5),h.nc(e.macros.carbs)}}const p=[{path:"",component:(()=>{class e{constructor(){this.showMacroForm=!1,this.newWeightDate=(new Date).toISOString()}ngOnInit(){var e,t;this.lossPercent=100*a.a.lossPercent,this.macros=a.a.macros;const n=this.macros;this.showMacroForm=!(n.calories&&n.protein&&n.fat&&n.carbs),this.currentWeight=null!==(t=null===(e=a.a.weights[a.a.weights.length-1])||void 0===e?void 0:e.weight)&&void 0!==t?t:"-",this.hideWeight=a.a.hideWeight}toggleHideWeight(){this.hideWeight=!this.hideWeight,a.a.hideWeight=this.hideWeight,a.a.save("hideWeight")}forceUpdateMacroForm(){this.showMacroForm=!0}get hiddenWeight(){return this.currentWeight.toString().split("").map(()=>"*").join("")}logMacros(){const e=this.macros;this.showMacroForm=!(e.calories&&e.protein&&e.fat&&e.carbs),a.a.save("macros")}logWeight(){this.newWeight&&(a.a.update("weights",e=>this.uniqueDatePush(e)),this.currentWeight=a.a.weights[a.a.weights.length-1].weight,this.newWeight=void 0)}macroUpdate(){const e=this.fetchWeekWeights();if(e.length<=0)return;const t=a.a.macros;if(t.calories&&t.protein&&t.fat&&t.carbs){const n=e[0].weight;if(n){const e=this.reajustMacros(t,n-this.lossPercent/100*n);if(!e)return;a.a.macros=e,a.a.save("macros"),this.macros=a.a.macros}}}updateFatLoss(){const e=this.lossPercent/100,t=a.a.macros;this.currentWeight&&"number"==typeof this.currentWeight&&t.calories&&t.protein&&t.fat&&t.carbs&&(a.a.macros=this.adjustMacros(t,this.currentWeight-e*this.currentWeight,this.currentWeight-a.a.lossPercent*this.currentWeight),a.a.save("macros"),this.macros=a.a.macros),a.a.lossPercent=e,a.a.save("lossPercent")}reajustMacros(e,t,n=0){const i=this.averageWeekWeight()+n;if(i>t)return;const o=this.adjustMacros(e,t,i);return confirm(Object(l.c)(o))?o:this.reajustMacros(e,t,n+.5)}adjustMacros(e,t,n){const i=t-n,{calories:o,protein:c,fat:r,carbs:a}=e,b=o+500*i,s=b/o,l=c*s,h=r*s,g=a*s;return{calories:Math.round(b),fat:Math.round(h),carbs:Math.round(g),protein:Math.round(l)}}fetchWeekWeights(){if(a.a.weights.length<1)return[];const e=(new Date).toISOString().substring(0,10),t=[];for(let n=0;n<a.a.weights.length-1;n++)Object(l.a)(e,a.a.weights[n].date)<=7&&t.push(a.a.weights[n]);return console.log(t),t}averageWeekWeight(){return function(e,t,n){const i=function(e,t,n){const i=.5/(n-1),o=[];for(let c=.5;Math.ceil(c)<=1;c+=i)o.push(c);return o}(0,0,e.length),o=b(i);return b(e.map((e,t)=>e*i[t]))/o}([...this.fetchWeekWeights().map(Object(s.b)("weight")),this.currentWeight])}uniqueDatePush(e){const t={weight:this.newWeight,date:this.newWeightDate.substring(0,10)},n=e.findIndex(({date:e})=>e===this.newWeightDate);n>=0&&e.splice(n,1),e.push(t),e.sort((e,t)=>e.date.localeCompare(t.date))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=h.Db({type:e,selectors:[["app-weight-tracker"]],decls:46,vars:9,consts:[["name","analytics-outline","color","primary",2,"float","right",3,"click"],["lines","full"],[4,"ngIf"],["name","eye-outline","color","primary",3,"click",4,"ngIf"],["name","eye-off-outline","color","primary",3,"click",4,"ngIf"],["placeholder","New Weight","type","number",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["color","primary","button","","detail","false",3,"click"],[2,"width","100%","height","100%","display","flex","justify-content","center","align-items","center"],["type","number",3,"ngModel","ngModelChange"],["slot","end",3,"click"],["name","refresh-outline","color","primary",2,"float","right",3,"click"],["name","eye-outline","color","primary",3,"click"],["name","eye-off-outline","color","primary",3,"click"],["position","floating"]],template:function(e,t){1&e&&(h.Ob(0,"app-header"),h.Ob(1,"ion-title"),h.mc(2," Weight Tracker "),h.Nb(),h.Nb(),h.Ob(3,"ion-content"),h.Ob(4,"ion-card"),h.Ob(5,"ion-card-header"),h.Ob(6,"ion-card-title"),h.mc(7," Weight "),h.Ob(8,"ion-icon",0),h.Wb("click",(function(){return null})),h.Nb(),h.Nb(),h.Nb(),h.Ob(9,"ion-card-content"),h.Ob(10,"ion-item",1),h.Ob(11,"ion-label"),h.mc(12,"Current Weight"),h.Nb(),h.lc(13,m,2,1,"ion-label",2),h.lc(14,d,2,1,"ion-label",2),h.lc(15,f,1,0,"ion-icon",3),h.lc(16,W,1,0,"ion-icon",4),h.Nb(),h.Ob(17,"ion-item",1),h.Ob(18,"ion-input",5),h.Wb("ngModelChange",(function(e){return t.newWeight=e})),h.Nb(),h.Nb(),h.Ob(19,"ion-item"),h.Ob(20,"ion-label"),h.mc(21,"Date"),h.Nb(),h.Ob(22,"ion-datetime",6),h.Wb("ngModelChange",(function(e){return t.newWeightDate=e})),h.Nb(),h.Nb(),h.Ob(23,"ion-item",7),h.Wb("click",(function(){return t.logWeight()})),h.Ob(24,"div",8),h.mc(25,"Log Weight"),h.Nb(),h.Nb(),h.Nb(),h.Nb(),h.Ob(26,"ion-card"),h.Ob(27,"ion-card-header"),h.Ob(28,"ion-card-title"),h.mc(29,"Fat Loss"),h.Nb(),h.Nb(),h.Ob(30,"ion-card-content"),h.Ob(31,"ion-item",1),h.Ob(32,"ion-label"),h.mc(33,"Weekly Fat Loss target (%)"),h.Nb(),h.Nb(),h.Ob(34,"ion-item",1),h.Ob(35,"ion-input",9),h.Wb("ngModelChange",(function(e){return t.lossPercent=e})),h.Nb(),h.Ob(36,"ion-button",10),h.Wb("click",(function(){return t.updateFatLoss()})),h.mc(37," Update "),h.Nb(),h.Nb(),h.Nb(),h.Nb(),h.Ob(38,"ion-card"),h.Ob(39,"ion-card-header"),h.Ob(40,"ion-card-title"),h.mc(41," Macros "),h.Ob(42,"ion-icon",11),h.Wb("click",(function(){return t.macroUpdate()})),h.Nb(),h.Nb(),h.Nb(),h.lc(43,O,20,4,"ion-card-content",2),h.lc(44,N,24,4,"ion-card-content",2),h.Nb(),h.Nb(),h.Kb(45,"app-footer")),2&e&&(h.xb(13),h.ec("ngIf",!t.hideWeight),h.xb(1),h.ec("ngIf",t.hideWeight),h.xb(1),h.ec("ngIf",!t.hideWeight),h.xb(1),h.ec("ngIf",t.hideWeight),h.xb(2),h.ec("ngModel",t.newWeight),h.xb(4),h.ec("ngModel",t.newWeightDate),h.xb(13),h.ec("ngModel",t.lossPercent),h.xb(8),h.ec("ngIf",t.showMacroForm),h.xb(1),h.ec("ngIf",!t.showMacroForm))},directives:[g.a,c.F,c.k,c.f,c.h,c.i,c.q,c.g,c.s,c.w,i.i,c.r,c.L,o.d,o.e,c.l,c.N,c.d,u.a],styles:[""]}),e})()}];let M=(()=>{class e{}return e.\u0275mod=h.Hb({type:e}),e.\u0275inj=h.Gb({factory:function(t){return new(t||e)},imports:[[r.i.forChild(p)],r.i]}),e})();var w=n("j1ZV");let k=(()=>{class e{}return e.\u0275mod=h.Hb({type:e}),e.\u0275inj=h.Gb({factory:function(t){return new(t||e)},imports:[[i.b,o.a,c.I,w.a,M]]}),e})()}}]);