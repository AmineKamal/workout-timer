(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"9v8Q":function(e,t,n){"use strict";n.r(t),n.d(t,"WeightTrackerPageModule",(function(){return F}));var i=n("ofXK"),o=n("3Pt+"),c=n("TEn/"),r=n("tyNb"),a=n("UFF1");function b(e){return e.reduce((e,t)=>e+t,0)}var s=n("Ah2X"),h=n("2Q/g"),l=n("fXoL");function g(e,t){if(1&e&&(l.Ob(0,"ion-label"),l.oc(1),l.Nb()),2&e){const e=l.Zb();l.xb(1),l.pc(e.currentWeight)}}function u(e,t){if(1&e&&(l.Ob(0,"ion-label"),l.oc(1),l.Nb()),2&e){const e=l.Zb();l.xb(1),l.pc(e.hiddenWeight)}}function d(e,t){if(1&e){const e=l.Pb();l.Ob(0,"ion-icon",13),l.Wb("click",(function(){return l.hc(e),l.Zb().toggleHideWeight()})),l.Nb()}}function f(e,t){if(1&e){const e=l.Pb();l.Ob(0,"ion-icon",14),l.Wb("click",(function(){return l.hc(e),l.Zb().toggleHideWeight()})),l.Nb()}}function m(e,t){if(1&e){const e=l.Pb();l.Ob(0,"ion-card-content"),l.Ob(1,"ion-item",1),l.Ob(2,"ion-label",15),l.oc(3,"Calories"),l.Nb(),l.Ob(4,"ion-input",9),l.Wb("ngModelChange",(function(t){return l.hc(e),l.Zb().macros.calories=t})),l.Nb(),l.Nb(),l.Ob(5,"ion-item",1),l.Ob(6,"ion-label",15),l.oc(7,"Protein"),l.Nb(),l.Ob(8,"ion-input",9),l.Wb("ngModelChange",(function(t){return l.hc(e),l.Zb().macros.protein=t})),l.Nb(),l.Nb(),l.Ob(9,"ion-item",1),l.Ob(10,"ion-label",15),l.oc(11,"Fat"),l.Nb(),l.Ob(12,"ion-input",9),l.Wb("ngModelChange",(function(t){return l.hc(e),l.Zb().macros.fat=t})),l.Nb(),l.Nb(),l.Ob(13,"ion-item",1),l.Ob(14,"ion-label",15),l.oc(15,"Carbs"),l.Nb(),l.Ob(16,"ion-input",9),l.Wb("ngModelChange",(function(t){return l.hc(e),l.Zb().macros.carbs=t})),l.Nb(),l.Nb(),l.Ob(17,"ion-item",7),l.Wb("click",(function(){return l.hc(e),l.Zb().logMacros()})),l.Ob(18,"div",8),l.oc(19,"Save Macros"),l.Nb(),l.Nb(),l.Nb()}if(2&e){const e=l.Zb();l.xb(4),l.ec("ngModel",e.macros.calories),l.xb(4),l.ec("ngModel",e.macros.protein),l.xb(4),l.ec("ngModel",e.macros.fat),l.xb(4),l.ec("ngModel",e.macros.carbs)}}function p(e,t){if(1&e){const e=l.Pb();l.Ob(0,"ion-card-content"),l.Ob(1,"ion-item",1),l.Ob(2,"ion-label"),l.oc(3,"Calories"),l.Nb(),l.Ob(4,"ion-label"),l.oc(5),l.Nb(),l.Nb(),l.Ob(6,"ion-item",1),l.Ob(7,"ion-label"),l.oc(8,"Protein"),l.Nb(),l.Ob(9,"ion-label"),l.oc(10),l.Nb(),l.Nb(),l.Ob(11,"ion-item",1),l.Ob(12,"ion-label"),l.oc(13,"Fat"),l.Nb(),l.Ob(14,"ion-label"),l.oc(15),l.Nb(),l.Nb(),l.Ob(16,"ion-item",1),l.Ob(17,"ion-label"),l.oc(18,"Carbs"),l.Nb(),l.Ob(19,"ion-label"),l.oc(20),l.Nb(),l.Nb(),l.Ob(21,"ion-item",7),l.Wb("click",(function(){return l.hc(e),l.Zb().forceUpdateMacroForm()})),l.Ob(22,"div",8),l.oc(23,"Update Macros"),l.Nb(),l.Nb(),l.Nb()}if(2&e){const e=l.Zb();l.xb(5),l.pc(e.macros.calories),l.xb(5),l.pc(e.macros.protein),l.xb(5),l.pc(e.macros.fat),l.xb(5),l.pc(e.macros.carbs)}}let W=(()=>{class e{constructor(){this.showMacroForm=!1,this.newWeightDate=(new Date).toISOString(),this.weights=a.a.weights}ngOnInit(){var e,t;this.lossPercent=100*a.a.lossPercent,this.macros=a.a.macros;const n=this.macros;this.showMacroForm=!(n.calories&&n.protein&&n.fat&&n.carbs),this.currentWeight=null!==(t=null===(e=a.a.weights[a.a.weights.length-1])||void 0===e?void 0:e.weight)&&void 0!==t?t:"-",this.hideWeight=a.a.hideWeight}toggleHideWeight(){this.hideWeight=!this.hideWeight,a.a.hideWeight=this.hideWeight,a.a.save("hideWeight")}forceUpdateMacroForm(){this.showMacroForm=!0}get hiddenWeight(){return this.currentWeight.toString().split("").map(()=>"*").join("")}logMacros(){const e=this.macros;this.showMacroForm=!(e.calories&&e.protein&&e.fat&&e.carbs),a.a.save("macros")}logWeight(){this.newWeight&&(a.a.update("weights",e=>this.uniqueDatePush(e)),this.currentWeight=a.a.weights[a.a.weights.length-1].weight,this.newWeight=void 0)}macroUpdate(){const e=this.fetchWeekWeights();if(e.length<=0)return;const t=a.a.macros;if(t.calories&&t.protein&&t.fat&&t.carbs){const n=e[0].weight;if(n){const e=this.reajustMacros(t,n-this.lossPercent/100*n);if(!e)return;a.a.macros=e,a.a.save("macros"),this.macros=a.a.macros}}}updateFatLoss(){const e=this.lossPercent/100,t=a.a.macros;this.currentWeight&&"number"==typeof this.currentWeight&&t.calories&&t.protein&&t.fat&&t.carbs&&(a.a.macros=this.adjustMacros(t,this.currentWeight-e*this.currentWeight,this.currentWeight-a.a.lossPercent*this.currentWeight),a.a.save("macros"),this.macros=a.a.macros),a.a.lossPercent=e,a.a.save("lossPercent")}reajustMacros(e,t,n=0){const i=this.averageWeekWeight()+n;if(i>t)return;const o=this.adjustMacros(e,t,i);return confirm(Object(h.c)(o))?o:this.reajustMacros(e,t,n+.5)}adjustMacros(e,t,n){const i=t-n,{calories:o,protein:c,fat:r,carbs:a}=e,b=o+500*i,s=b/o,h=c*s,l=r*s,g=a*s;return{calories:Math.round(b),fat:Math.round(l),carbs:Math.round(g),protein:Math.round(h)}}fetchWeekWeights(){if(a.a.weights.length<1)return[];const e=(new Date).toISOString().substring(0,10),t=[];for(let n=0;n<a.a.weights.length-1;n++)Object(h.a)(e,a.a.weights[n].date)<=7&&t.push(a.a.weights[n]);return console.log(t),t}averageWeekWeight(){return function(e,t,n){const i=function(e,t,n){const i=.5/(n-1),o=[];for(let c=.5;Math.ceil(c)<=1;c+=i)o.push(c);return o}(0,0,e.length),o=b(i);return b(e.map((e,t)=>e*i[t]))/o}([...this.fetchWeekWeights().map(Object(s.b)("weight")),this.currentWeight])}uniqueDatePush(e){const t={weight:this.newWeight,date:this.newWeightDate.substring(0,10)},n=e.findIndex(({date:e})=>e===this.newWeightDate);n>=0&&e.splice(n,1),e.push(t),e.sort((e,t)=>e.date.localeCompare(t.date))}}return e.\u0275fac=function(t){return new(t||e)},e.\u0275cmp=l.Db({type:e,selectors:[["app-weight-tracker"]],decls:48,vars:10,consts:[["name","analytics-outline","color","primary",2,"float","right",3,"click"],["lines","full"],[4,"ngIf"],["name","eye-outline","color","primary",3,"click",4,"ngIf"],["name","eye-off-outline","color","primary",3,"click",4,"ngIf"],["placeholder","New Weight","type","number",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["color","primary","button","","detail","false",3,"click"],[2,"width","100%","height","100%","display","flex","justify-content","center","align-items","center"],["type","number",3,"ngModel","ngModelChange"],["slot","end",3,"click"],["name","refresh-outline","color","primary",2,"float","right",3,"click"],[3,"data"],["name","eye-outline","color","primary",3,"click"],["name","eye-off-outline","color","primary",3,"click"],["position","floating"]],template:function(e,t){1&e&&(l.Ob(0,"app-header"),l.Ob(1,"ion-title"),l.oc(2," Weight Tracker "),l.Nb(),l.Nb(),l.Ob(3,"ion-content"),l.Ob(4,"ion-card"),l.Ob(5,"ion-card-header"),l.Ob(6,"ion-card-title"),l.oc(7," Weight "),l.Ob(8,"ion-icon",0),l.Wb("click",(function(){return null})),l.Nb(),l.Nb(),l.Nb(),l.Ob(9,"ion-card-content"),l.Ob(10,"ion-item",1),l.Ob(11,"ion-label"),l.oc(12,"Current Weight"),l.Nb(),l.nc(13,g,2,1,"ion-label",2),l.nc(14,u,2,1,"ion-label",2),l.nc(15,d,1,0,"ion-icon",3),l.nc(16,f,1,0,"ion-icon",4),l.Nb(),l.Ob(17,"ion-item",1),l.Ob(18,"ion-input",5),l.Wb("ngModelChange",(function(e){return t.newWeight=e})),l.Nb(),l.Nb(),l.Ob(19,"ion-item"),l.Ob(20,"ion-label"),l.oc(21,"Date"),l.Nb(),l.Ob(22,"ion-datetime",6),l.Wb("ngModelChange",(function(e){return t.newWeightDate=e})),l.Nb(),l.Nb(),l.Ob(23,"ion-item",7),l.Wb("click",(function(){return t.logWeight()})),l.Ob(24,"div",8),l.oc(25,"Log Weight"),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Ob(26,"ion-card"),l.Ob(27,"ion-card-header"),l.Ob(28,"ion-card-title"),l.oc(29,"Fat Loss"),l.Nb(),l.Nb(),l.Ob(30,"ion-card-content"),l.Ob(31,"ion-item",1),l.Ob(32,"ion-label"),l.oc(33,"Weekly Fat Loss target (%)"),l.Nb(),l.Nb(),l.Ob(34,"ion-item",1),l.Ob(35,"ion-input",9),l.Wb("ngModelChange",(function(e){return t.lossPercent=e})),l.Nb(),l.Ob(36,"ion-button",10),l.Wb("click",(function(){return t.updateFatLoss()})),l.oc(37," Update "),l.Nb(),l.Nb(),l.Nb(),l.Nb(),l.Ob(38,"ion-card"),l.Ob(39,"ion-card-header"),l.Ob(40,"ion-card-title"),l.oc(41," Macros "),l.Ob(42,"ion-icon",11),l.Wb("click",(function(){return t.macroUpdate()})),l.Nb(),l.Nb(),l.Nb(),l.nc(43,m,20,4,"ion-card-content",2),l.nc(44,p,24,4,"ion-card-content",2),l.Nb(),l.Ob(45,"ion-card"),l.Kb(46,"app-chart",12),l.Nb(),l.Nb(),l.Kb(47,"app-footer")),2&e&&(l.xb(13),l.ec("ngIf",!t.hideWeight),l.xb(1),l.ec("ngIf",t.hideWeight),l.xb(1),l.ec("ngIf",!t.hideWeight),l.xb(1),l.ec("ngIf",t.hideWeight),l.xb(2),l.ec("ngModel",t.newWeight),l.xb(4),l.ec("ngModel",t.newWeightDate),l.xb(13),l.ec("ngModel",t.lossPercent),l.xb(8),l.ec("ngIf",t.showMacroForm),l.xb(1),l.ec("ngIf",!t.showMacroForm),l.xb(2),l.ec("data",t.weights))},styles:[""]}),e})();const O=[{path:"",component:W}];let N=(()=>{class e{}return e.\u0275mod=l.Hb({type:e}),e.\u0275inj=l.Gb({factory:function(t){return new(t||e)},imports:[[r.k.forChild(O)],r.k]}),e})();var w=n("j1ZV"),M=n("2MiI"),k=n("LmEr"),y=n("gNuR"),x=n("f2Wq"),v=n("Jn3H"),P=n("PVgB"),j=n("4p0u"),C=n("0HKr");let F=(()=>{class e{}return e.\u0275mod=l.Hb({type:e}),e.\u0275inj=l.Gb({factory:function(t){return new(t||e)},imports:[[i.c,o.e,c.yb,w.a,N]]}),e})();l.jc(W,[i.q,i.r,i.s,i.t,i.A,i.w,i.x,i.y,i.z,i.u,i.v,o.y,o.o,o.x,o.c,o.p,o.s,o.a,o.v,o.w,o.r,o.j,o.k,o.u,o.g,o.f,o.q,o.b,o.d,o.m,o.n,o.l,c.b,c.c,c.d,c.f,c.g,c.h,c.i,c.j,c.k,c.l,c.m,c.n,c.o,c.p,c.q,c.r,c.s,c.t,c.u,c.v,c.w,c.x,c.y,c.z,c.A,c.B,c.C,c.D,c.E,c.F,c.G,c.H,c.I,c.J,c.K,c.L,c.M,c.N,c.O,c.P,c.Q,c.R,c.S,c.T,c.U,c.V,c.W,c.X,c.Y,c.Z,c.ab,c.bb,c.db,c.eb,c.fb,c.gb,c.hb,c.ib,c.jb,c.kb,c.lb,c.mb,c.nb,c.ob,c.pb,c.rb,c.sb,c.tb,c.vb,c.wb,c.ub,c.qb,c.a,c.Cb,c.Eb,c.Gb,c.Hb,c.cb,c.e,c.Bb,c.Fb,c.Jb,c.Kb,c.Lb,c.xb,M.a,k.a,y.a,x.a,v.a,P.a,j.a,C.a,r.l,r.h,r.j,r.i,r.n,W],[i.b,i.G,i.p,i.k,i.E,i.g,i.C,i.F,i.d,i.f,i.i,i.j,i.l])}}]);