!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"9v8Q":function(t,r,o){"use strict";o.r(r),o.d(r,"WeightTrackerPageModule",(function(){return C}));var a=o("ofXK"),c=o("3Pt+"),b=o("TEn/"),s=o("tyNb"),l=o("UFF1");function u(e){return e.reduce((function(e,t){return e+t}),0)}var h=o("Ah2X"),g=o("2Q/g"),f=o("fXoL"),m=o("2MiI"),d=o("LmEr");function p(e,t){if(1&e&&(f.Ob(0,"ion-label"),f.mc(1),f.Nb()),2&e){var n=f.Zb();f.xb(1),f.nc(n.currentWeight)}}function O(e,t){if(1&e&&(f.Ob(0,"ion-label"),f.mc(1),f.Nb()),2&e){var n=f.Zb();f.xb(1),f.nc(n.hiddenWeight)}}function W(e,t){if(1&e){var n=f.Pb();f.Ob(0,"ion-icon",12),f.Wb("click",(function(){return f.gc(n),f.Zb().toggleHideWeight()})),f.Nb()}}function N(e,t){if(1&e){var n=f.Pb();f.Ob(0,"ion-icon",13),f.Wb("click",(function(){return f.gc(n),f.Zb().toggleHideWeight()})),f.Nb()}}function v(e,t){if(1&e){var n=f.Pb();f.Ob(0,"ion-card-content"),f.Ob(1,"ion-item",1),f.Ob(2,"ion-label",14),f.mc(3,"Calories"),f.Nb(),f.Ob(4,"ion-input",9),f.Wb("ngModelChange",(function(e){return f.gc(n),f.Zb().macros.calories=e})),f.Nb(),f.Nb(),f.Ob(5,"ion-item",1),f.Ob(6,"ion-label",14),f.mc(7,"Protein"),f.Nb(),f.Ob(8,"ion-input",9),f.Wb("ngModelChange",(function(e){return f.gc(n),f.Zb().macros.protein=e})),f.Nb(),f.Nb(),f.Ob(9,"ion-item",1),f.Ob(10,"ion-label",14),f.mc(11,"Fat"),f.Nb(),f.Ob(12,"ion-input",9),f.Wb("ngModelChange",(function(e){return f.gc(n),f.Zb().macros.fat=e})),f.Nb(),f.Nb(),f.Ob(13,"ion-item",1),f.Ob(14,"ion-label",14),f.mc(15,"Carbs"),f.Nb(),f.Ob(16,"ion-input",9),f.Wb("ngModelChange",(function(e){return f.gc(n),f.Zb().macros.carbs=e})),f.Nb(),f.Nb(),f.Ob(17,"ion-item",7),f.Wb("click",(function(){return f.gc(n),f.Zb().logMacros()})),f.Ob(18,"div",8),f.mc(19,"Save Macros"),f.Nb(),f.Nb(),f.Nb()}if(2&e){var i=f.Zb();f.xb(4),f.ec("ngModel",i.macros.calories),f.xb(4),f.ec("ngModel",i.macros.protein),f.xb(4),f.ec("ngModel",i.macros.fat),f.xb(4),f.ec("ngModel",i.macros.carbs)}}function y(e,t){if(1&e){var n=f.Pb();f.Ob(0,"ion-card-content"),f.Ob(1,"ion-item",1),f.Ob(2,"ion-label"),f.mc(3,"Calories"),f.Nb(),f.Ob(4,"ion-label"),f.mc(5),f.Nb(),f.Nb(),f.Ob(6,"ion-item",1),f.Ob(7,"ion-label"),f.mc(8,"Protein"),f.Nb(),f.Ob(9,"ion-label"),f.mc(10),f.Nb(),f.Nb(),f.Ob(11,"ion-item",1),f.Ob(12,"ion-label"),f.mc(13,"Fat"),f.Nb(),f.Ob(14,"ion-label"),f.mc(15),f.Nb(),f.Nb(),f.Ob(16,"ion-item",1),f.Ob(17,"ion-label"),f.mc(18,"Carbs"),f.Nb(),f.Ob(19,"ion-label"),f.mc(20),f.Nb(),f.Nb(),f.Ob(21,"ion-item",7),f.Wb("click",(function(){return f.gc(n),f.Zb().forceUpdateMacroForm()})),f.Ob(22,"div",8),f.mc(23,"Update Macros"),f.Nb(),f.Nb(),f.Nb()}if(2&e){var i=f.Zb();f.xb(5),f.nc(i.macros.calories),f.xb(5),f.nc(i.macros.protein),f.xb(5),f.nc(i.macros.fat),f.xb(5),f.nc(i.macros.carbs)}}var w,M,k,x=[{path:"",component:(w=function(){function t(){n(this,t),this.showMacroForm=!1,this.newWeightDate=(new Date).toISOString()}var r,o,a;return r=t,(o=[{key:"ngOnInit",value:function(){var e,t;this.lossPercent=100*l.a.lossPercent,this.macros=l.a.macros;var n=this.macros;this.showMacroForm=!(n.calories&&n.protein&&n.fat&&n.carbs),this.currentWeight=null!==(t=null===(e=l.a.weights[l.a.weights.length-1])||void 0===e?void 0:e.weight)&&void 0!==t?t:"-",this.hideWeight=l.a.hideWeight}},{key:"toggleHideWeight",value:function(){this.hideWeight=!this.hideWeight,l.a.hideWeight=this.hideWeight,l.a.save("hideWeight")}},{key:"forceUpdateMacroForm",value:function(){this.showMacroForm=!0}},{key:"logMacros",value:function(){var e=this.macros;this.showMacroForm=!(e.calories&&e.protein&&e.fat&&e.carbs),l.a.save("macros")}},{key:"logWeight",value:function(){var e=this;this.newWeight&&(l.a.update("weights",(function(t){return e.uniqueDatePush(t)})),this.currentWeight=l.a.weights[l.a.weights.length-1].weight,this.newWeight=void 0)}},{key:"macroUpdate",value:function(){var e=this.fetchWeekWeights();if(!(e.length<=0)){var t=l.a.macros;if(t.calories&&t.protein&&t.fat&&t.carbs){var n=e[0].weight;if(n){var i=this.reajustMacros(t,n-this.lossPercent/100*n);if(!i)return;l.a.macros=i,l.a.save("macros"),this.macros=l.a.macros}}}}},{key:"updateFatLoss",value:function(){var e=this.lossPercent/100,t=l.a.macros;this.currentWeight&&"number"==typeof this.currentWeight&&t.calories&&t.protein&&t.fat&&t.carbs&&(l.a.macros=this.adjustMacros(t,this.currentWeight-e*this.currentWeight,this.currentWeight-l.a.lossPercent*this.currentWeight),l.a.save("macros"),this.macros=l.a.macros),l.a.lossPercent=e,l.a.save("lossPercent")}},{key:"reajustMacros",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this.averageWeekWeight()+n;if(!(i>t)){var r=this.adjustMacros(e,t,i);return confirm(Object(g.c)(r))?r:this.reajustMacros(e,t,n+.5)}}},{key:"adjustMacros",value:function(e,t,n){var i=t-n,r=e.calories,o=r+500*i,a=o/r,c=e.protein*a,b=e.fat*a,s=e.carbs*a;return{calories:Math.round(o),fat:Math.round(b),carbs:Math.round(s),protein:Math.round(c)}}},{key:"fetchWeekWeights",value:function(){if(l.a.weights.length<1)return[];for(var e=(new Date).toISOString().substring(0,10),t=[],n=0;n<l.a.weights.length-1;n++)Object(g.a)(e,l.a.weights[n].date)<=7&&t.push(l.a.weights[n]);return console.log(t),t}},{key:"averageWeekWeight",value:function(){return t=[].concat(e(this.fetchWeekWeights().map(Object(h.b)("weight"))),[this.currentWeight]),n=function(e,t,n){for(var i=.5/(n-1),r=[],o=.5;Math.ceil(o)<=1;o+=i)r.push(o);return r}(0,0,t.length),i=u(n),u(t.map((function(e,t){return e*n[t]})))/i;var t,n,i}},{key:"uniqueDatePush",value:function(e){var t=this,n={weight:this.newWeight,date:this.newWeightDate.substring(0,10)},i=e.findIndex((function(e){return e.date===t.newWeightDate}));i>=0&&e.splice(i,1),e.push(n),e.sort((function(e,t){return e.date.localeCompare(t.date)}))}},{key:"hiddenWeight",get:function(){return this.currentWeight.toString().split("").map((function(){return"*"})).join("")}}])&&i(r.prototype,o),a&&i(r,a),t}(),w.\u0275fac=function(e){return new(e||w)},w.\u0275cmp=f.Db({type:w,selectors:[["app-weight-tracker"]],decls:46,vars:9,consts:[["name","analytics-outline","color","primary",2,"float","right",3,"click"],["lines","full"],[4,"ngIf"],["name","eye-outline","color","primary",3,"click",4,"ngIf"],["name","eye-off-outline","color","primary",3,"click",4,"ngIf"],["placeholder","New Weight","type","number",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["color","primary","button","","detail","false",3,"click"],[2,"width","100%","height","100%","display","flex","justify-content","center","align-items","center"],["type","number",3,"ngModel","ngModelChange"],["slot","end",3,"click"],["name","refresh-outline","color","primary",2,"float","right",3,"click"],["name","eye-outline","color","primary",3,"click"],["name","eye-off-outline","color","primary",3,"click"],["position","floating"]],template:function(e,t){1&e&&(f.Ob(0,"app-header"),f.Ob(1,"ion-title"),f.mc(2," Weight Tracker "),f.Nb(),f.Nb(),f.Ob(3,"ion-content"),f.Ob(4,"ion-card"),f.Ob(5,"ion-card-header"),f.Ob(6,"ion-card-title"),f.mc(7," Weight "),f.Ob(8,"ion-icon",0),f.Wb("click",(function(){return null})),f.Nb(),f.Nb(),f.Nb(),f.Ob(9,"ion-card-content"),f.Ob(10,"ion-item",1),f.Ob(11,"ion-label"),f.mc(12,"Current Weight"),f.Nb(),f.lc(13,p,2,1,"ion-label",2),f.lc(14,O,2,1,"ion-label",2),f.lc(15,W,1,0,"ion-icon",3),f.lc(16,N,1,0,"ion-icon",4),f.Nb(),f.Ob(17,"ion-item",1),f.Ob(18,"ion-input",5),f.Wb("ngModelChange",(function(e){return t.newWeight=e})),f.Nb(),f.Nb(),f.Ob(19,"ion-item"),f.Ob(20,"ion-label"),f.mc(21,"Date"),f.Nb(),f.Ob(22,"ion-datetime",6),f.Wb("ngModelChange",(function(e){return t.newWeightDate=e})),f.Nb(),f.Nb(),f.Ob(23,"ion-item",7),f.Wb("click",(function(){return t.logWeight()})),f.Ob(24,"div",8),f.mc(25,"Log Weight"),f.Nb(),f.Nb(),f.Nb(),f.Nb(),f.Ob(26,"ion-card"),f.Ob(27,"ion-card-header"),f.Ob(28,"ion-card-title"),f.mc(29,"Fat Loss"),f.Nb(),f.Nb(),f.Ob(30,"ion-card-content"),f.Ob(31,"ion-item",1),f.Ob(32,"ion-label"),f.mc(33,"Weekly Fat Loss target (%)"),f.Nb(),f.Nb(),f.Ob(34,"ion-item",1),f.Ob(35,"ion-input",9),f.Wb("ngModelChange",(function(e){return t.lossPercent=e})),f.Nb(),f.Ob(36,"ion-button",10),f.Wb("click",(function(){return t.updateFatLoss()})),f.mc(37," Update "),f.Nb(),f.Nb(),f.Nb(),f.Nb(),f.Ob(38,"ion-card"),f.Ob(39,"ion-card-header"),f.Ob(40,"ion-card-title"),f.mc(41," Macros "),f.Ob(42,"ion-icon",11),f.Wb("click",(function(){return t.macroUpdate()})),f.Nb(),f.Nb(),f.Nb(),f.lc(43,v,20,4,"ion-card-content",2),f.lc(44,y,24,4,"ion-card-content",2),f.Nb(),f.Nb(),f.Kb(45,"app-footer")),2&e&&(f.xb(13),f.ec("ngIf",!t.hideWeight),f.xb(1),f.ec("ngIf",t.hideWeight),f.xb(1),f.ec("ngIf",!t.hideWeight),f.xb(1),f.ec("ngIf",t.hideWeight),f.xb(2),f.ec("ngModel",t.newWeight),f.xb(4),f.ec("ngModel",t.newWeightDate),f.xb(13),f.ec("ngModel",t.lossPercent),f.xb(8),f.ec("ngIf",t.showMacroForm),f.xb(1),f.ec("ngIf",!t.showMacroForm))},directives:[m.a,b.F,b.k,b.f,b.h,b.i,b.q,b.g,b.s,b.w,a.i,b.r,b.L,c.d,c.e,b.l,b.N,b.d,d.a],styles:[""]}),w)}],P=((M=function e(){n(this,e)}).\u0275mod=f.Hb({type:M}),M.\u0275inj=f.Gb({factory:function(e){return new(e||M)},imports:[[s.i.forChild(x)],s.i]}),M),j=o("j1ZV"),C=((k=function e(){n(this,e)}).\u0275mod=f.Hb({type:k}),k.\u0275inj=f.Gb({factory:function(e){return new(e||k)},imports:[[a.b,c.a,b.I,j.a,P]]}),k)}}])}();