!function(){function e(e){return function(e){if(Array.isArray(e))return t(e)}(e)||function(e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(e))return Array.from(e)}(e)||function(e,n){if(!e)return;if("string"==typeof e)return t(e,n);var i=Object.prototype.toString.call(e).slice(8,-1);"Object"===i&&e.constructor&&(i=e.constructor.name);if("Map"===i||"Set"===i)return Array.from(e);if("Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i))return t(e,n)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function t(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,i=new Array(t);n<t;n++)i[n]=e[n];return i}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function i(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"9v8Q":function(t,o,r){"use strict";r.r(o),r.d(o,"WeightTrackerPageModule",(function(){return H}));var a=r("ofXK"),c=r("3Pt+"),b=r("TEn/"),s=r("tyNb"),l=r("UFF1");function h(e){return e.reduce((function(e,t){return e+t}),0)}var u=r("Ah2X"),g=r("2Q/g"),f=r("fXoL");function d(e,t){if(1&e&&(f.Ob(0,"ion-label"),f.oc(1),f.Nb()),2&e){var n=f.Zb();f.xb(1),f.pc(n.currentWeight)}}function m(e,t){if(1&e&&(f.Ob(0,"ion-label"),f.oc(1),f.Nb()),2&e){var n=f.Zb();f.xb(1),f.pc(n.hiddenWeight)}}function p(e,t){if(1&e){var n=f.Pb();f.Ob(0,"ion-icon",13),f.Wb("click",(function(){return f.hc(n),f.Zb().toggleHideWeight()})),f.Nb()}}function O(e,t){if(1&e){var n=f.Pb();f.Ob(0,"ion-icon",14),f.Wb("click",(function(){return f.hc(n),f.Zb().toggleHideWeight()})),f.Nb()}}function W(e,t){if(1&e){var n=f.Pb();f.Ob(0,"ion-card-content"),f.Ob(1,"ion-item",1),f.Ob(2,"ion-label",15),f.oc(3,"Calories"),f.Nb(),f.Ob(4,"ion-input",9),f.Wb("ngModelChange",(function(e){return f.hc(n),f.Zb().macros.calories=e})),f.Nb(),f.Nb(),f.Ob(5,"ion-item",1),f.Ob(6,"ion-label",15),f.oc(7,"Protein"),f.Nb(),f.Ob(8,"ion-input",9),f.Wb("ngModelChange",(function(e){return f.hc(n),f.Zb().macros.protein=e})),f.Nb(),f.Nb(),f.Ob(9,"ion-item",1),f.Ob(10,"ion-label",15),f.oc(11,"Fat"),f.Nb(),f.Ob(12,"ion-input",9),f.Wb("ngModelChange",(function(e){return f.hc(n),f.Zb().macros.fat=e})),f.Nb(),f.Nb(),f.Ob(13,"ion-item",1),f.Ob(14,"ion-label",15),f.oc(15,"Carbs"),f.Nb(),f.Ob(16,"ion-input",9),f.Wb("ngModelChange",(function(e){return f.hc(n),f.Zb().macros.carbs=e})),f.Nb(),f.Nb(),f.Ob(17,"ion-item",7),f.Wb("click",(function(){return f.hc(n),f.Zb().logMacros()})),f.Ob(18,"div",8),f.oc(19,"Save Macros"),f.Nb(),f.Nb(),f.Nb()}if(2&e){var i=f.Zb();f.xb(4),f.ec("ngModel",i.macros.calories),f.xb(4),f.ec("ngModel",i.macros.protein),f.xb(4),f.ec("ngModel",i.macros.fat),f.xb(4),f.ec("ngModel",i.macros.carbs)}}function v(e,t){if(1&e){var n=f.Pb();f.Ob(0,"ion-card-content"),f.Ob(1,"ion-item",1),f.Ob(2,"ion-label"),f.oc(3,"Calories"),f.Nb(),f.Ob(4,"ion-label"),f.oc(5),f.Nb(),f.Nb(),f.Ob(6,"ion-item",1),f.Ob(7,"ion-label"),f.oc(8,"Protein"),f.Nb(),f.Ob(9,"ion-label"),f.oc(10),f.Nb(),f.Nb(),f.Ob(11,"ion-item",1),f.Ob(12,"ion-label"),f.oc(13,"Fat"),f.Nb(),f.Ob(14,"ion-label"),f.oc(15),f.Nb(),f.Nb(),f.Ob(16,"ion-item",1),f.Ob(17,"ion-label"),f.oc(18,"Carbs"),f.Nb(),f.Ob(19,"ion-label"),f.oc(20),f.Nb(),f.Nb(),f.Ob(21,"ion-item",7),f.Wb("click",(function(){return f.hc(n),f.Zb().forceUpdateMacroForm()})),f.Ob(22,"div",8),f.oc(23,"Update Macros"),f.Nb(),f.Nb(),f.Nb()}if(2&e){var i=f.Zb();f.xb(5),f.pc(i.macros.calories),f.xb(5),f.pc(i.macros.protein),f.xb(5),f.pc(i.macros.fat),f.xb(5),f.pc(i.macros.carbs)}}var N,y,w,M=((N=function(){function t(){n(this,t),this.showMacroForm=!1,this.newWeightDate=(new Date).toISOString(),this.weights=l.a.weights}var o,r,a;return o=t,(r=[{key:"ngOnInit",value:function(){var e,t;this.lossPercent=100*l.a.lossPercent,this.macros=l.a.macros;var n=this.macros;this.showMacroForm=!(n.calories&&n.protein&&n.fat&&n.carbs),this.currentWeight=null!==(t=null===(e=l.a.weights[l.a.weights.length-1])||void 0===e?void 0:e.weight)&&void 0!==t?t:"-",this.hideWeight=l.a.hideWeight}},{key:"toggleHideWeight",value:function(){this.hideWeight=!this.hideWeight,l.a.hideWeight=this.hideWeight,l.a.save("hideWeight")}},{key:"forceUpdateMacroForm",value:function(){this.showMacroForm=!0}},{key:"logMacros",value:function(){var e=this.macros;this.showMacroForm=!(e.calories&&e.protein&&e.fat&&e.carbs),l.a.save("macros")}},{key:"logWeight",value:function(){var e=this;this.newWeight&&(l.a.update("weights",(function(t){return e.uniqueDatePush(t)})),this.currentWeight=l.a.weights[l.a.weights.length-1].weight,this.newWeight=void 0)}},{key:"macroUpdate",value:function(){var e=this.fetchWeekWeights();if(!(e.length<=0)){var t=l.a.macros;if(t.calories&&t.protein&&t.fat&&t.carbs){var n=e[0].weight;if(n){var i=this.reajustMacros(t,n-this.lossPercent/100*n);if(!i)return;l.a.macros=i,l.a.save("macros"),this.macros=l.a.macros}}}}},{key:"updateFatLoss",value:function(){var e=this.lossPercent/100,t=l.a.macros;this.currentWeight&&"number"==typeof this.currentWeight&&t.calories&&t.protein&&t.fat&&t.carbs&&(l.a.macros=this.adjustMacros(t,this.currentWeight-e*this.currentWeight,this.currentWeight-l.a.lossPercent*this.currentWeight),l.a.save("macros"),this.macros=l.a.macros),l.a.lossPercent=e,l.a.save("lossPercent")}},{key:"reajustMacros",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,i=this.averageWeekWeight()+n;if(!(i>t)){var o=this.adjustMacros(e,t,i);return confirm(Object(g.c)(o))?o:this.reajustMacros(e,t,n+.5)}}},{key:"adjustMacros",value:function(e,t,n){var i=t-n,o=e.calories,r=o+500*i,a=r/o,c=e.protein*a,b=e.fat*a,s=e.carbs*a;return{calories:Math.round(r),fat:Math.round(b),carbs:Math.round(s),protein:Math.round(c)}}},{key:"fetchWeekWeights",value:function(){if(l.a.weights.length<1)return[];for(var e=(new Date).toISOString().substring(0,10),t=[],n=0;n<l.a.weights.length-1;n++)Object(g.a)(e,l.a.weights[n].date)<=7&&t.push(l.a.weights[n]);return console.log(t),t}},{key:"averageWeekWeight",value:function(){return t=[].concat(e(this.fetchWeekWeights().map(Object(u.b)("weight"))),[this.currentWeight]),n=function(e,t,n){for(var i=.5/(n-1),o=[],r=.5;Math.ceil(r)<=1;r+=i)o.push(r);return o}(0,0,t.length),i=h(n),h(t.map((function(e,t){return e*n[t]})))/i;var t,n,i}},{key:"uniqueDatePush",value:function(e){var t=this,n={weight:this.newWeight,date:this.newWeightDate.substring(0,10)},i=e.findIndex((function(e){return e.date===t.newWeightDate}));i>=0&&e.splice(i,1),e.push(n),e.sort((function(e,t){return e.date.localeCompare(t.date)}))}},{key:"hiddenWeight",get:function(){return this.currentWeight.toString().split("").map((function(){return"*"})).join("")}}])&&i(o.prototype,r),a&&i(o,a),t}()).\u0275fac=function(e){return new(e||N)},N.\u0275cmp=f.Db({type:N,selectors:[["app-weight-tracker"]],decls:48,vars:10,consts:[["name","analytics-outline","color","primary",2,"float","right",3,"click"],["lines","full"],[4,"ngIf"],["name","eye-outline","color","primary",3,"click",4,"ngIf"],["name","eye-off-outline","color","primary",3,"click",4,"ngIf"],["placeholder","New Weight","type","number",3,"ngModel","ngModelChange"],[3,"ngModel","ngModelChange"],["color","primary","button","","detail","false",3,"click"],[2,"width","100%","height","100%","display","flex","justify-content","center","align-items","center"],["type","number",3,"ngModel","ngModelChange"],["slot","end",3,"click"],["name","refresh-outline","color","primary",2,"float","right",3,"click"],[3,"data"],["name","eye-outline","color","primary",3,"click"],["name","eye-off-outline","color","primary",3,"click"],["position","floating"]],template:function(e,t){1&e&&(f.Ob(0,"app-header"),f.Ob(1,"ion-title"),f.oc(2," Weight Tracker "),f.Nb(),f.Nb(),f.Ob(3,"ion-content"),f.Ob(4,"ion-card"),f.Ob(5,"ion-card-header"),f.Ob(6,"ion-card-title"),f.oc(7," Weight "),f.Ob(8,"ion-icon",0),f.Wb("click",(function(){return null})),f.Nb(),f.Nb(),f.Nb(),f.Ob(9,"ion-card-content"),f.Ob(10,"ion-item",1),f.Ob(11,"ion-label"),f.oc(12,"Current Weight"),f.Nb(),f.nc(13,d,2,1,"ion-label",2),f.nc(14,m,2,1,"ion-label",2),f.nc(15,p,1,0,"ion-icon",3),f.nc(16,O,1,0,"ion-icon",4),f.Nb(),f.Ob(17,"ion-item",1),f.Ob(18,"ion-input",5),f.Wb("ngModelChange",(function(e){return t.newWeight=e})),f.Nb(),f.Nb(),f.Ob(19,"ion-item"),f.Ob(20,"ion-label"),f.oc(21,"Date"),f.Nb(),f.Ob(22,"ion-datetime",6),f.Wb("ngModelChange",(function(e){return t.newWeightDate=e})),f.Nb(),f.Nb(),f.Ob(23,"ion-item",7),f.Wb("click",(function(){return t.logWeight()})),f.Ob(24,"div",8),f.oc(25,"Log Weight"),f.Nb(),f.Nb(),f.Nb(),f.Nb(),f.Ob(26,"ion-card"),f.Ob(27,"ion-card-header"),f.Ob(28,"ion-card-title"),f.oc(29,"Fat Loss"),f.Nb(),f.Nb(),f.Ob(30,"ion-card-content"),f.Ob(31,"ion-item",1),f.Ob(32,"ion-label"),f.oc(33,"Weekly Fat Loss target (%)"),f.Nb(),f.Nb(),f.Ob(34,"ion-item",1),f.Ob(35,"ion-input",9),f.Wb("ngModelChange",(function(e){return t.lossPercent=e})),f.Nb(),f.Ob(36,"ion-button",10),f.Wb("click",(function(){return t.updateFatLoss()})),f.oc(37," Update "),f.Nb(),f.Nb(),f.Nb(),f.Nb(),f.Ob(38,"ion-card"),f.Ob(39,"ion-card-header"),f.Ob(40,"ion-card-title"),f.oc(41," Macros "),f.Ob(42,"ion-icon",11),f.Wb("click",(function(){return t.macroUpdate()})),f.Nb(),f.Nb(),f.Nb(),f.nc(43,W,20,4,"ion-card-content",2),f.nc(44,v,24,4,"ion-card-content",2),f.Nb(),f.Ob(45,"ion-card"),f.Kb(46,"app-chart",12),f.Nb(),f.Nb(),f.Kb(47,"app-footer")),2&e&&(f.xb(13),f.ec("ngIf",!t.hideWeight),f.xb(1),f.ec("ngIf",t.hideWeight),f.xb(1),f.ec("ngIf",!t.hideWeight),f.xb(1),f.ec("ngIf",t.hideWeight),f.xb(2),f.ec("ngModel",t.newWeight),f.xb(4),f.ec("ngModel",t.newWeightDate),f.xb(13),f.ec("ngModel",t.lossPercent),f.xb(8),f.ec("ngIf",t.showMacroForm),f.xb(1),f.ec("ngIf",!t.showMacroForm),f.xb(2),f.ec("data",t.weights))},styles:[""]}),N),k=[{path:"",component:M}],x=((y=function e(){n(this,e)}).\u0275mod=f.Hb({type:y}),y.\u0275inj=f.Gb({factory:function(e){return new(e||y)},imports:[[s.k.forChild(k)],s.k]}),y),j=r("j1ZV"),C=r("2MiI"),P=r("LmEr"),F=r("gNuR"),I=r("f2Wq"),Z=r("Jn3H"),D=r("PVgB"),S=r("4p0u"),A=r("0HKr"),H=((w=function e(){n(this,e)}).\u0275mod=f.Hb({type:w}),w.\u0275inj=f.Gb({factory:function(e){return new(e||w)},imports:[[a.c,c.e,b.yb,j.a,x]]}),w);f.jc(M,[a.q,a.r,a.s,a.t,a.A,a.w,a.x,a.y,a.z,a.u,a.v,c.y,c.o,c.x,c.c,c.p,c.s,c.a,c.v,c.w,c.r,c.j,c.k,c.u,c.g,c.f,c.q,c.b,c.d,c.m,c.n,c.l,b.b,b.c,b.d,b.f,b.g,b.h,b.i,b.j,b.k,b.l,b.m,b.n,b.o,b.p,b.q,b.r,b.s,b.t,b.u,b.v,b.w,b.x,b.y,b.z,b.A,b.B,b.C,b.D,b.E,b.F,b.G,b.H,b.I,b.J,b.K,b.L,b.M,b.N,b.O,b.P,b.Q,b.R,b.S,b.T,b.U,b.V,b.W,b.X,b.Y,b.Z,b.ab,b.bb,b.db,b.eb,b.fb,b.gb,b.hb,b.ib,b.jb,b.kb,b.lb,b.mb,b.nb,b.ob,b.pb,b.rb,b.sb,b.tb,b.vb,b.wb,b.ub,b.qb,b.a,b.Cb,b.Eb,b.Gb,b.Hb,b.cb,b.e,b.Bb,b.Fb,b.Jb,b.Kb,b.Lb,b.xb,C.a,P.a,F.a,I.a,Z.a,D.a,S.a,A.a,s.l,s.h,s.j,s.i,s.n,M],[a.b,a.G,a.p,a.k,a.E,a.g,a.C,a.F,a.d,a.f,a.i,a.j,a.l])}}])}();